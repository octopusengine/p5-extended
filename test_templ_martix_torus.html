<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<title>DesignMatrix Controlled</title>
<link rel="stylesheet" type="text/css" href="dark.css"> 
<script src="js/p5.min.js"></script>
<script src="js/box_design.js"></script>
<script src="js/box_torus.js"></script>
<script src="js/box_gui.js"></script>

</head>

<body>
  <label>
    <input type="checkbox" id="toggleRun" checked> Running
  </label>

  <br>
  <script>
 let matrix;
let running = true;
let t0, t1;
let freqSlider; // Canvas slider for t1.freq2

function setup() {
  createCanvas(600, 400);
  t0 = new Template();

  // matrix instance
  matrix = new DesignMatrix(50, 100, 50, 200, 10, 30); // left

  // torus points
  t1 = new BoxTorusPoints(t0.xC, t0.yC);
  t1.speedX = 0.1;
  t1.radius0 = 50;
  t1.radius1 = 30;
  t1.freq = 5;
  t1.freq2 = 5; // default value

  // running checkbox
  document.getElementById('toggleRun').addEventListener('change', (e) => {
    running = e.target.checked;
  });

  // --- Canvas slider for t1.freq2 ---
  // x, y, width, height, min, default, max
  freqSlider = new BoxSlider(t0.xC-150, 350, 300, 20, 1, 100, 250);
}

function draw() {
  background(0);

  // update slider
  freqSlider.update();

  // apply slider value directly to t1.freq2
  t1.freq2 = int(freqSlider.value)/300;
  matrix.treshold = int(freqSlider.value);


  // draw slider
  freqSlider.draw();

  // --- optional text display ---
  noStroke();
  fill(0, 255, 0);
  textAlign(LEFT, TOP);
  text("Torus freq2: " + int(freqSlider.value), 420, 370);

  // update matrix if running
  if (running && frameCount % 8 === 0) {
    matrix.updateColors();
  }

  // draw matrix and template
  matrix.draw();
  t0.drawGrid();
  t0.draw();

  // update and draw torus
  t1.update();
  t1.draw();
}

function mousePressed() {
  freqSlider.pressed();
}

function mouseReleased() {
  freqSlider.released();
}



  </script>
</body>
</html>
